import{j as P,k as y,l as m,m as b,p as D,w as k,u as v,q as B,s as C,b as O,h as x,t as E,o as M}from"./entry.c4473d43.js";const j=()=>null;function z(...i){var p;const c=typeof i[i.length-1]=="string"?i.pop():void 0;typeof i[0]!="string"&&i.unshift(c);let[e,l,t={}]=i;if(typeof e!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof l!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");t.server=t.server??!0,t.default=t.default??j,t.lazy=t.lazy??!1,t.immediate=t.immediate??!0;const a=P(),f=()=>a.isHydrating?a.payload.data[e]:a.static.data[e],d=()=>f()!==void 0;a._asyncData[e]||(a._asyncData[e]={data:y(f()??((p=t.default)==null?void 0:p.call(t))??null),pending:y(!d()),error:y(a.payload._errors[e]?m(a.payload._errors[e]):null)});const n={...a._asyncData[e]};n.refresh=n.execute=(s={})=>{if(a._asyncDataPromises[e]){if(s.dedupe===!1)return a._asyncDataPromises[e];a._asyncDataPromises[e].cancelled=!0}if(s._initial&&d())return f();n.pending.value=!0;const u=new Promise((r,o)=>{try{r(l(a))}catch(w){o(w)}}).then(r=>{if(u.cancelled)return a._asyncDataPromises[e];let o=r;t.transform&&(o=t.transform(r)),t.pick&&(o=A(o,t.pick)),n.data.value=o,n.error.value=null}).catch(r=>{var o;if(u.cancelled)return a._asyncDataPromises[e];n.error.value=r,n.data.value=v(((o=t.default)==null?void 0:o.call(t))??null)}).finally(()=>{u.cancelled||(n.pending.value=!1,a.payload.data[e]=n.data.value,n.error.value&&(a.payload._errors[e]=m(n.error.value)),delete a._asyncDataPromises[e])});return a._asyncDataPromises[e]=u,a._asyncDataPromises[e]};const _=()=>n.refresh({_initial:!0}),g=t.server!==!1&&a.payload.serverRendered;{const s=B();if(s&&!s._nuxtOnBeforeMountCbs){s._nuxtOnBeforeMountCbs=[];const r=s._nuxtOnBeforeMountCbs;s&&(b(()=>{r.forEach(o=>{o()}),r.splice(0,r.length)}),D(()=>r.splice(0,r.length)))}g&&a.isHydrating&&d()?n.pending.value=!1:s&&(a.payload.serverRendered&&a.isHydrating||t.lazy)&&t.immediate?s._nuxtOnBeforeMountCbs.push(_):t.immediate&&_(),t.watch&&k(t.watch,()=>n.refresh());const u=a.hook("app:data:refresh",r=>{if(!r||r.includes(e))return n.refresh()});s&&D(u)}const h=Promise.resolve(a._asyncDataPromises[e]).then(()=>n);return Object.assign(h,n),h}function A(i,c){const e={};for(const l of c)e[l]=i[l];return e}const H={class:"m-6 flex flex-col gap-6"},N=x("h1",null,"Dashboard",-1),R={class:"text-xl"},T={__name:"index",async setup(i){let c,e;const l=([c,e]=C(()=>z("data",()=>$fetch("data.json"))),c=await c,e(),c);return(t,a)=>(M(),O("div",H,[N,x("div",R," text: "+E(v(l)),1)]))}};export{T as default};
